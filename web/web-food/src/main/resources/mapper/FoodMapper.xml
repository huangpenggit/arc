<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- Mybatis mapper for Food  Auto generated by fms-mybatis-generator -->
<mapper namespace="com.arc.food.mapper.FoodMapper">
	<resultMap id="food" type="com.arc.food.model.domain.Food">
		<id property="id" column="f_id" javaType="long" jdbcType="BIGINT" />
		<result property="name" column="f_name" javaType="string" jdbcType="VARCHAR" />
		<result property="normalPrice" column="f_normal_price" javaType="int" jdbcType="INTEGER" />
		<result property="realPrice" column="f_real_price" javaType="int" jdbcType="INTEGER" />
		<result property="intro" column="f_intro" javaType="string" jdbcType="VARCHAR" />
		<result property="note" column="f_note" javaType="string" jdbcType="VARCHAR" />
		<result property="type" column="f_type" javaType="int" jdbcType="INTEGER" />
		<result property="description" column="f_description" javaType="string" jdbcType="VARCHAR" />
		<result property="image" column="f_image" javaType="string" jdbcType="VARCHAR" />
		<result property="providerId" column="f_provider_id" javaType="int" jdbcType="INTEGER" />
		<result property="provider" column="f_provider" javaType="string" jdbcType="VARCHAR" />
		<result property="evaluation" column="f_evaluation" javaType="string" jdbcType="VARCHAR" />
		<result property="stock" column="f_stock" javaType="int" jdbcType="INTEGER" />
		<result property="sale" column="f_sale" javaType="int" jdbcType="INTEGER" />
		<result property="last" column="f_last" javaType="int" jdbcType="INTEGER" />
		<result property="status" column="f_status" javaType="int" jdbcType="INTEGER" />
	</resultMap>

	<sql id="sqlfoodColumns">
		f_.id AS f_id,
		f_.`name` AS f_name,
		f_.normal_price AS f_normal_price,
		f_.real_price AS f_real_price,
		f_.intro AS f_intro,
		f_.note AS f_note,
		f_.`type` AS f_type,
		f_.description AS f_description,
		f_.image AS f_image,
		f_.provider_id AS f_provider_id,
		f_.provider AS f_provider,
		f_.evaluation AS f_evaluation,
		f_.stock AS f_stock,
		f_.sale AS f_sale,
		f_.`last` AS f_last,
		f_.status AS f_status
	</sql>

	<select id="get" parameterType="long" resultMap="food">
		SELECT <include refid="sqlfoodColumns" />
        FROM food f_
        WHERE f_.id = #{id,jdbcType=BIGINT}
	</select>

    <select id="list"  resultMap="food">
        SELECT
        <include refid="sqlfoodColumns"/>
        FROM food f_
        where f_.status!=0;
	</select>

    <select id="page"  resultMap="food">
		SELECT <include refid="sqlfoodColumns" />
        FROM food f_
	</select>

    <delete id="delete" parameterType="long">
        DELETE  FROM  FOOD WHERE  id=#{id}
    </delete>

	<insert id="save" parameterType="com.arc.food.model.domain.Food" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO food (
			`name`,
			normal_price,
			real_price,
			intro,
			note,
			`type`,
			description,
			image,
			provider_id,
			provider,
			evaluation,
			stock,
			sale,
			`last`,
			status
		)
        VALUES (
			#{name,jdbcType=VARCHAR},
			#{normalPrice,jdbcType=INTEGER},
			#{realPrice,jdbcType=INTEGER},
			#{intro,jdbcType=VARCHAR},
			#{note,jdbcType=VARCHAR},
			#{type,jdbcType=INTEGER},
			#{description,jdbcType=VARCHAR},
			#{image,jdbcType=VARCHAR},
			#{providerId,jdbcType=INTEGER},
			#{provider,jdbcType=VARCHAR},
			#{evaluation,jdbcType=VARCHAR},
			#{strock,jdbcType=INTEGER},
			#{sale,jdbcType=INTEGER},
			#{last,jdbcType=INTEGER},
			#{status,jdbcType=INTEGER}
		)
	</insert>

	<update id="update" parameterType="com.arc.food.model.domain.Food">
		UPDATE food
		<set>
			<if test="name != null and name != ''">`name` = #{name,jdbcType=VARCHAR},</if>
			<if test="normalPrice != null">normal_price = #{normalPrice,jdbcType=INTEGER},</if>
			<if test="realPrice != null">real_price = #{realPrice,jdbcType=INTEGER},</if>
			<if test="intro != null and intro != ''">intro = #{intro,jdbcType=VARCHAR},</if>
			<if test="note != null and note != ''">note = #{note,jdbcType=VARCHAR},</if>
			<if test="type != null">`type` = #{type,jdbcType=INTEGER},</if>
			<if test="description != null and description != ''">description = #{description,jdbcType=VARCHAR},</if>
			<if test="image != null and image != ''">image = #{image,jdbcType=VARCHAR},</if>
			<if test="providerId != null">provider_id = #{providerId,jdbcType=INTEGER},</if>
			<if test="provider != null and provider != ''">provider = #{provider,jdbcType=VARCHAR},</if>
			<if test="evaluation != null and evaluation != ''">evaluation = #{evaluation,jdbcType=VARCHAR},</if>
			<if test="stock != null">stock = #{stock,jdbcType=INTEGER},</if>
			<if test="sale != null">sale = #{sale,jdbcType=INTEGER},</if>
			<if test="last != null">last = #{last,jdbcType=INTEGER},</if>
			<if test="status != null">status = #{status,jdbcType=INTEGER},</if>
		</set>
		WHERE id = #{id,jdbcType=BIGINT}
	</update>

</mapper>
